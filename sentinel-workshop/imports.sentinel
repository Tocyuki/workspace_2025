// 利用するものを宣言
import "http"
import "json"

// standard imports を利用して外部 API を呼び出し、そのデータを変数 resp に格納する
resp = http.get("https://httpbin.org/get")

// JSON（Sentinel 内では Map）として扱うことができるようにマーシャリング処理を行う
r = json.unmarshal(resp.body)

// フィールドを指定してアクセスしてみる
print("Origin IP address is " + r.origin)

// レスポンスボディのホストヘッダーが httpbin.org であることをチェックする
rule_1 = rule {
  r.headers.Host == "httpbin.org"
}

main = rule {
  rule_1 == true
}
